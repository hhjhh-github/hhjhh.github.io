---
title: imageJ 数据处理
tags: code
article_header:
  type: cover
  image:
    src: 
---



# <center>imageJ 同一文件夹下的所有文件批处理<center>

## 以bin（1,1,9）举例
- “// This macro processes all the images in a folder and any subfolders.
macro "Process_subfolders" {
	path = getDirectory("Choose Source Directory ");
	setBatchMode(true);//Prevent images from showing up to speed up
	process_all(path);
	
	function process_all(path) {//Recursion function
		list = getFileList(path);
	    for (i=0; i<list.length; i++) {
	    	if (endsWith(list[i], "/")){//It's a folder.
	        	process_all(path+list[i]);}//Recurse to enter the subfolder
	        else {//It's an image.
	            if (endsWith(list[i],".mrc")){   //".mrc就是指选定所有文件夹内的mrc文件，如果想只选定488或者560通道的，只需要将.mrc替换成对应通道的文件名，如TIRF488_cam1_step_001可选中所有相同文件名的文件"
	            dir = path + list[i];
	            print(dir);//Show processed images
	            processimage(dir);} }
	        }
	}
	function processimage(path) {//Process function
		open(path);
		title = getTitle();
		run("Bin...", "x=1 y=1 z=9 bin=Average");  //这一步可以换一个程序实现除bin以外的效果。
		saveAs("Tiff", path + "_after");//Prevent image overwrite //_after是bin的文件的外加后缀，如果删去会替换掉原文件。
		close(title);
	}
}”