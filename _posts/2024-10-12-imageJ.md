---
title: imageJ 数据处理
tags: code
article_header:
  type: cover
  image:
    src: 
---



# <center>imageJ 同一文件夹下的所有文件批处理<center>

## 以bin（1,1,9）举例
```
// This macro processes all the images in a folder and any subfolders.
macro "Process_subfolders" {
	path = getDirectory("Choose Source Directory ");
	setBatchMode(true);//Prevent images from showing up to speed up
	process_all(path);
	
	function process_all(path) {//Recursion function
		list = getFileList(path);
	    for (i=0; i<list.length; i++) {
	    	if (endsWith(list[i], "/")){//It's a folder.
	        	process_all(path+list[i]);}//Recurse to enter the subfolder
	        else {//It's an image.
              if (endsWith(list[i],".mrc")){ //选择以.mrc结尾的文件，也可以将.mrc改为完整的文件名+扩展来处理每个文件夹内的某一通道的文件。
	            dir = path + list[i];
	            print(dir);//Show processed images
	            processimage(dir);} 
	        }
	}
	function processimage(path) {//Process function
		open(path);
		title = getTitle();
		run("Bin...", "x=1 y=1 z=9 bin=Average"); //选择对图像处理的方式，可以更改。
		saveAs("Tiff", path + "_after");//Prevent image overwrite
		close(title);
	}
}
```